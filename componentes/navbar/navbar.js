import { cerrarSesion } from '../../almacenamiento/cerrarSesion.js'
import { getCapitulos } from '../../almacenamiento/getCapitulos.js'
import { obtenerUsuarioLogueado } from '../../almacenamiento/obtenerUsuarioLogueado.js'
import { obtenerEstadoUsuario } from '../../servicios/usuarios/obtenerEstadoUsuario.js'
const header = document.querySelector('header')
const resultadosContenedor = document.querySelector(
	'.busqueda-resultados-contenedor'
)

/**
 * Renderiza el navbar basada en el usuario logeado  y la pagina  actual.
 * @return {void} - No retorn nada.
 */
export const renderizarNavbar = () => {
	const usuarioLogeado = obtenerUsuarioLogueado()
	const estadoUsuario = usuarioLogeado
		? obtenerEstadoUsuario(usuarioLogeado)
		: false

	header.innerHTML = `
	  <nav class="spikes navbar navbar-principal navbar-expand-md" >
				<div class="container-fluid">
					<a class="navbar-brand" href="/index.html"
						><img
							class="navbar-principal-imagen"
							src="/recursos/media/img/Devs-Duff-Logo.png"
							alt="imagen logo de devsduff"
					/></a>
					<button
						class="navbar-toggler navbar-principal-boton-hamburguesa"
						type="button"
						data-bs-toggle="collapse"
						data-bs-target="#navbarSupportedContent"
						aria-controls="navbarSupportedContent"
						aria-expanded="false"
						aria-label="Toggle navigation">
						<div class="navbar-toggler-icon"></div>
					</button>
					<div
						class="collapse navbar-collapse align-items-center justify-content-md-evenly px-3"
						id="navbarSupportedContent">
						<ul class="navbar-nav mb-0 align-items-center">
							<li class="nav-item">
								<a class="nav-link" aria-current="page" href="/index.html">Inicio</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/index.html#temporadas">Temporadas</a>
							</li>

							<li class="nav-item">
								<a class="nav-link" aria-current="page" href="/paginas/sobreNosotros/sobreNosotros.html">Nosotros</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" aria-current="page" href="/paginas/contacto/contacto.html">Contacto</a>
							</li>
						</ul>
						${
							usuarioLogeado && estadoUsuario == 'aprobado'
								? `	<form
							class="d-flex mx-auto pe-2 navbar-principal-formulario my-2 mb-md-0">
							<input
								class="form-control me-2 focus-ring focus-ring-dark"
								type="search"
								placeholder="Buscar capitulos"
								aria-label="Search"
								id='inputBusqueda' />
								<label for='inputBusqueda'>
								<i class="bi bi-search"></i>
								</label>
						</form>`
								: `<a href='/paginas/registro/registro.html' class='nav-link btn ms-0 ms-md-2 py-2 py-md-0 d-flex flex-column align-items-center flex-lg-row '>Registrate
								<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="40" height="40" viewBox="0,0,256,256"
style="fill:#000000;">
<g fill="#e33e97" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.12,5.12)"><path d="M18.53125,3c-0.39062,-0.01172 -0.75,0.20313 -0.92578,0.55469l-0.87891,1.75781l-1.01953,-1.01953c-0.26562,-0.26562 -0.66016,-0.35938 -1.01953,-0.24219c-0.35547,0.11719 -0.61719,0.42578 -0.67578,0.79688l-1.95312,12.71094c-0.35547,0.33203 -1.05859,1.08984 -1.05859,2.44141v0.82422c-1.23047,1.18359 -2,2.84375 -2,4.67578c0,2.0625 0.97656,3.90234 2.48438,5.09375c-0.20703,0.87109 -0.49219,1.77734 -0.77734,2.625c-0.34766,1.04297 -0.69531,1.87891 -0.69531,2.78125c0,0.96875 0.58984,1.71875 1.28516,2.29297c0.69531,0.57422 1.57813,1.03906 2.55078,1.42969c1.30469,0.52734 2.76563,0.90625 4.16797,1.10547c-0.01562,0.07813 -0.01953,0.15625 -0.01562,0.23438c0,0 0.03516,0.69141 0.41406,1.40625c0.37891,0.71094 1.28906,1.51953 2.57031,1.52734c0.01563,0.03125 0.02734,0.06641 0.02734,0.07031l-0.01172,1.92969c-0.00781,0.35938 0.17969,0.69531 0.49219,0.87891c0.30859,0.18359 0.69531,0.18359 1.00781,0.00391c0.3125,-0.17969 0.50391,-0.51172 0.5,-0.875l0.01172,-2c0,-0.02344 0,-0.05078 -0.00391,-0.07812c0,0 -0.01953,-0.44141 -0.27344,-0.90234c-0.25,-0.46094 -0.91016,-1.02344 -1.73437,-1.02344c-0.58203,0 -0.66797,-0.18359 -0.82031,-0.46875c-0.125,-0.23828 -0.16016,-0.45312 -0.16797,-0.53125c3.11719,0 5.17969,-0.25391 6.49219,-0.51953c0.53516,-0.10937 0.92969,-0.22266 1.24609,-0.32422l0.55469,0.55078c0.25,0.26172 0.625,0.36719 0.97266,0.27344c0.35156,-0.08984 0.625,-0.36328 0.71484,-0.71484c0.09375,-0.34766 -0.01172,-0.72266 -0.27344,-0.97266l-0.95312,-0.94922c-0.02344,-0.02734 -0.04687,-0.05078 -0.07031,-0.07422l-0.97656,-0.97656c-0.1875,-0.19531 -0.44922,-0.30469 -0.71875,-0.30469c-0.35937,0.00391 -0.69141,0.19922 -0.87109,0.51172c-0.17578,0.31641 -0.16797,0.70313 0.01953,1.01172c-0.01953,0.00391 -0.01953,0.00391 -0.03906,0.00781c-1.15625,0.23438 -3.08984,0.48047 -6.09766,0.48047c-1.53906,0 -3.72266,-0.44922 -5.41797,-1.12891c-0.84375,-0.34375 -1.57031,-0.74609 -2.02344,-1.12109c-0.45312,-0.375 -0.55859,-0.65625 -0.55859,-0.75c0,-0.16016 0.24609,-1.10547 0.59375,-2.14453c0.23047,-0.68359 0.48438,-1.45312 0.70313,-2.24609c0.44141,0.16016 0.90234,0.27344 1.37891,0.33203c0.42188,0.61328 1.01563,1.05859 1.8125,1.05859h1.5c0.35938,0.00391 0.69531,-0.18359 0.87891,-0.49609c0.17969,-0.3125 0.17969,-0.69531 0,-1.00781c-0.18359,-0.3125 -0.51953,-0.5 -0.87891,-0.49609h-1.5c-0.28125,0 -0.5,-0.21875 -0.5,-0.5c0,-0.28125 0.21875,-0.5 0.5,-0.5h4c0.09766,0 0.19531,-0.01172 0.28906,-0.03906c1.1875,1.25 2.85938,2.03906 4.71094,2.03906c3.57813,0 6.5,-2.92187 6.5,-6.5c0,-3.57812 -2.92187,-6.5 -6.5,-6.5c-2.00781,0 -3.80859,0.92188 -5.00391,2.36328c-1.19531,-1.4375 -2.98828,-2.36328 -4.99609,-2.36328c-0.81641,0 -1.59375,0.16016 -2.31641,0.4375c0.19531,-0.36719 0.47266,-0.6875 0.47266,-0.6875c0.17969,-0.15234 0.29688,-0.36328 0.33203,-0.59766l1.69922,-11.05078l0.60547,0.60547c0.22656,0.22656 0.55078,0.33203 0.86719,0.28125c0.31641,-0.05078 0.58984,-0.25391 0.73438,-0.54297l0.68359,-1.36719l0.5625,0.9375c0.17188,0.27734 0.46484,0.46094 0.79297,0.48047c0.32422,0.02344 0.64453,-0.11719 0.84766,-0.37109l1.10156,-1.375l0.75781,1.26563c0.17188,0.27734 0.46484,0.46094 0.79297,0.48047c0.32422,0.02344 0.64453,-0.11719 0.84766,-0.37109l1.10156,-1.375l0.75781,1.26563c0.16016,0.26172 0.42969,0.4375 0.73828,0.47656c0.30469,0.03906 0.60938,-0.06641 0.82813,-0.28516l0.85547,-0.85547l0.48828,1.46484c0.10156,0.30859 0.35156,0.55078 0.66406,0.64453c0.31641,0.08984 0.65625,0.02344 0.91016,-0.17969l1.17188,-0.9375l0.21875,1.32031c0.05078,0.32422 0.26563,0.60547 0.56641,0.74219c0.29688,0.14063 0.64844,0.12109 0.93359,-0.04687l1.23828,-0.74609l0.26172,1.55078c0.05469,0.34375 0.28906,0.63281 0.61328,0.76563c0.32422,0.12891 0.69141,0.08203 0.96875,-0.12891l0.73047,-0.55078l0.19141,0.94531c0.05859,0.29297 0.24219,0.54297 0.50391,0.68359c0.26172,0.14063 0.57031,0.16016 0.84766,0.04688l0.56641,-0.22266c-3.72656,11.63672 -4.96484,18.33203 -5.28516,20.29688c-0.07031,0.00391 -0.23437,0.00391 -0.23437,0.00391c-0.36719,0.01953 -0.69141,0.23438 -0.84766,0.5625c-0.16016,0.32813 -0.12891,0.71875 0.08203,1.01563c0.21484,0.29688 0.57031,0.45703 0.92969,0.41406c0,0 0.60938,-0.03125 1.13672,0.12109c0.26563,0.07813 0.47656,0.19531 0.59375,0.31641c0.11328,0.11719 0.1875,0.22656 0.1875,0.56641c0,0.94141 -0.19922,1.16016 -0.375,1.28516c-0.17187,0.12891 -0.56641,0.21484 -1.125,0.21484c-0.20312,0 -0.97656,-0.35156 -0.97656,-0.35156c-0.30469,-0.19922 -0.69531,-0.21875 -1.01562,-0.05078c-0.32422,0.17188 -0.53125,0.50391 -0.53516,0.86719c-0.00781,0.36719 0.1875,0.70703 0.50391,0.88672c0,0 0.17969,0.12109 0.44531,0.25781c-0.25781,0.92969 -0.78516,3.16406 -0.86328,6.30078c-0.08594,0.04688 -0.13281,0.08203 -0.3125,0.14453c-0.58984,0.20313 -1.73047,0.44531 -3.74609,0.44531c-0.35937,-0.00391 -0.69531,0.18359 -0.87891,0.49609c-0.17969,0.3125 -0.17969,0.69531 0,1.00781c0.18359,0.3125 0.51953,0.5 0.87891,0.49609c2.17188,0 3.52734,-0.25781 4.39453,-0.55469c0.43359,-0.14844 0.74609,-0.30859 0.96484,-0.45703c0.21875,-0.14453 0.41797,-0.35937 0.41797,-0.35937c0.14453,-0.17578 0.22266,-0.39844 0.22266,-0.62891c0,-4.05078 0.77344,-6.21875 0.88672,-6.51172c0.60938,-0.02344 1.29688,-0.12891 1.92578,-0.58594c0.76172,-0.5625 1.1875,-1.59375 1.1875,-2.90234c0,-0.78516 -0.30078,-1.48828 -0.75,-1.95312c-0.34375,-0.36328 -0.74609,-0.56641 -1.13672,-0.71875c0.27344,-1.8125 1.49609,-8.88672 5.83594,-22.01562c0.12109,-0.36719 0.01953,-0.77344 -0.26562,-1.03906c-0.28125,-0.26562 -0.69531,-0.34375 -1.05469,-0.20312l-1.38281,0.55469l-0.26562,-1.32031c-0.06641,-0.33594 -0.30078,-0.61719 -0.62109,-0.73828c-0.32422,-0.125 -0.68359,-0.07422 -0.95703,0.13281l-0.6875,0.51172l-0.23047,-1.375c-0.05078,-0.32422 -0.26562,-0.60547 -0.56641,-0.74219c-0.29687,-0.14062 -0.64844,-0.12109 -0.93359,0.04688l-1.23828,0.74609l-0.26172,-1.55078c-0.05469,-0.35156 -0.29687,-0.64453 -0.625,-0.76953c-0.33203,-0.12891 -0.70703,-0.07031 -0.98437,0.15234l-1.37891,1.10156l-0.54687,-1.63672c-0.10937,-0.32813 -0.38281,-0.57813 -0.71875,-0.65625c-0.33594,-0.08203 -0.69141,0.01953 -0.9375,0.26563l-1.09375,1.09375l-0.83984,-1.40234c-0.17187,-0.27734 -0.46484,-0.46094 -0.79297,-0.48047c-0.32422,-0.02344 -0.64453,0.11719 -0.84766,0.37109l-1.10156,1.375l-0.75781,-1.26562c-0.17187,-0.27734 -0.46484,-0.46094 -0.79297,-0.48047c-0.32422,-0.02344 -0.64453,0.11719 -0.84766,0.37109l-1.10156,1.375l-0.75781,-1.26562c-0.17578,-0.28906 -0.48828,-0.47266 -0.82812,-0.48437zM15.5,21c1.67969,0 3.12891,0.92188 3.90234,2.27734c-0.25391,0.69531 -0.40234,1.44141 -0.40234,2.22266c0,0.88672 0.17969,1.73047 0.5,2.5h-3c-1.11328,0 -2.05469,0.75 -2.375,1.76563c-0.30859,-0.09766 -0.59766,-0.22656 -0.87109,-0.38281c-0.08984,-0.07031 -0.1875,-0.125 -0.29687,-0.16406c-1.18359,-0.80859 -1.95703,-2.16797 -1.95703,-3.71875c0,-2.49609 2.00391,-4.5 4.5,-4.5zM25.5,21c2.49609,0 4.5,2.00391 4.5,4.5c0,2.49609 -2.00391,4.5 -4.5,4.5c-2.49609,0 -4.5,-2.00391 -4.5,-4.5c0,-2.49609 2.00391,-4.5 4.5,-4.5zM16,25c-0.55078,0 -1,0.44922 -1,1c0,0.55078 0.44922,1 1,1c0.55078,0 1,-0.44922 1,-1c0,-0.55078 -0.44922,-1 -1,-1zM26,26c-0.55078,0 -1,0.44922 -1,1c0,0.55078 0.44922,1 1,1c0.55078,0 1,-0.44922 1,-1c0,-0.55078 -0.44922,-1 -1,-1z"></path></g></g>
</svg></a>`
						}
					
						${
							usuarioLogeado
								? `<div class="dropdown-center text-center py-2 py-md-0">
							<a
								class="nav-link dropdown-toggle"
								href="#"
								id="navbarDropdown"
								role="button"
								data-bs-toggle="dropdown"
								aria-expanded="false">
								<img
									class="navbar-principal-usuario-imagen ms-0 ms-md-2"
									src="/recursos/media/img/donut.png"
									alt="imagen opciones de usuario" />
								Opciones
							</a>
							<ul
								class="dropdown-menu dropdown-menu-light dropdown-menu-end"
								aria-labelledby="navbarDropdown">
								${
									usuarioLogeado.rol === 'admin'
										? `
												<li>
									<a class="dropdown-item" href="/paginas/admin/edicion/edicion.html"
										>Administrar contenido <i class="bi bi-gear-fill"></i
									></a>
								</li>
								<li>
									<a class="dropdown-item" href="/paginas/admin/usuarios/usuarios.html"
										>Administrar usuarios <i class="bi bi-gear-fill"></i
									></a>
								</li>
								<li><hr class="dropdown-divider" /></li>
									`
										: ''
								}
					
								<li>
									<button class="dropdown-item btn btn-warning" id='btnCerrarSesion'>
									Cerrar sesion
									<i class="bi bi-box-arrow-right"></i
									></button>
								</li>
							</ul>
						</div>`
								: `<a href='/paginas/login/login.html' class='nav-link btn ms-0 ms-md-2 py-2 py-md-0 d-flex flex-column align-items-center flex-lg-row '>Inicia Sesion
								<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="40" height="40" viewBox="0,0,256,256"
style="fill:#000000;">
<g fill="#e33e97" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.12,5.12)"><path d="M23,3c-0.91406,0 -1.37891,0.48438 -1.94141,0.97656c-0.5625,0.49219 -1.13281,1.10937 -1.66797,1.72656c-0.53516,0.62109 -1.03125,1.24609 -1.42187,1.73828c-0.18359,0.23438 -0.34375,0.43359 -0.46484,0.58984c-0.16797,-0.01562 -0.37109,-0.03516 -0.65234,-0.07812c-0.68359,-0.10937 -1.62109,-0.28516 -2.61328,-0.46094c-0.99219,-0.17578 -2.03516,-0.35547 -2.98047,-0.46094c-0.94531,-0.10547 -1.73828,-0.17969 -2.48437,-0.00781c-0.36328,0.08594 -0.64844,0.36719 -0.74219,0.72656c-0.55469,2.14844 -0.34766,4.91016 -0.04687,8.04297c-0.07422,0.0625 -0.16016,0.14453 -0.32031,0.25781c-0.41406,0.29297 -1.04297,0.66016 -1.68359,1.03906c-0.64062,0.37891 -1.29687,0.76172 -1.83984,1.16797c-0.26953,0.20313 -0.51562,0.40625 -0.73047,0.66797c-0.21484,0.26172 -0.46875,0.64063 -0.40234,1.19141c0.00781,0.06641 0.01953,0.12891 0.03906,0.19531c0.59375,1.8125 1.94141,3.375 3.125,4.54688c0.89063,0.88281 1.55859,1.41406 1.90625,1.6875c-0.04687,0.3125 -0.07812,0.62891 -0.07812,0.95313c0,2.18359 1.08984,4.11328 2.75,5.29688c-0.58594,0.53906 -1.12109,0.98828 -1.54687,1.35156c-0.28125,0.23828 -0.52734,0.45313 -0.75,0.71875c-0.21875,0.26563 -0.45312,0.64453 -0.45312,1.13281c0,1.35938 0.98828,2.49219 2.51563,3.41797c1.33594,0.80859 3.17578,1.41406 5.48438,1.55078c0,0.03125 0,0.0625 0,0.09375c0,0 0.03516,0.69141 0.41406,1.40625c0.37891,0.71094 1.28516,1.51953 2.57031,1.52734c0.01172,0.03125 0.02734,0.06641 0.02734,0.07031l-0.01172,1.92969c-0.00781,0.35938 0.17969,0.69531 0.49219,0.87891c0.30859,0.18359 0.69531,0.18359 1.00781,0.00391c0.3125,-0.17969 0.50391,-0.51172 0.5,-0.875l0.01172,-2c0,-0.02344 0,-0.05078 -0.00391,-0.07812c0,0 -0.01953,-0.44141 -0.27344,-0.90234c-0.25,-0.46094 -0.91016,-1.02344 -1.73437,-1.02344c-0.58203,0 -0.66797,-0.18359 -0.82031,-0.46875c-0.13281,-0.25 -0.16797,-0.48437 -0.17578,-0.54687c3.28125,-0.04297 5.56641,-0.26172 7.02344,-0.5c1.06641,-0.17187 1.62891,-0.32812 1.97266,-0.4375c0.03516,0.53516 0.48438,0.94531 1.02344,0.93359c0.53516,-0.01172 0.96875,-0.44531 0.97656,-0.98047c0,-2.59766 -2.51562,-3.875 -2.51562,-3.875c-0.14844,-0.08203 -0.3125,-0.12891 -0.48047,-0.12891c-0.46094,-0.00781 -0.86328,0.30078 -0.98047,0.74609c-0.11719,0.44531 0.08984,0.91406 0.49219,1.13281c0,0 0.22266,0.15625 0.47266,0.375c-0.29297,0.07422 -0.65234,0.16016 -1.28125,0.26563c-1.48047,0.23828 -3.92969,0.48438 -7.70703,0.48438c-2.46484,0 -4.28906,-0.58984 -5.45312,-1.29687c-1.07812,-0.65234 -1.44531,-1.39453 -1.5,-1.60937c0.08594,-0.09375 0.22656,-0.23047 0.45313,-0.42187c0.5,-0.42578 1.28125,-1.04297 2.17578,-1.9375c0.32813,0.09766 0.66797,0.16406 1.01172,0.20703c0.42188,0.61328 1.01563,1.05859 1.8125,1.05859h1.5c0.35938,0.00391 0.69531,-0.18359 0.87891,-0.49609c0.17969,-0.3125 0.17969,-0.69531 0,-1.00781c-0.18359,-0.3125 -0.51953,-0.5 -0.87891,-0.49609h-1.5c-0.28125,0 -0.5,-0.21875 -0.5,-0.5c0,-0.28125 0.21875,-0.5 0.5,-0.5h4c0.09766,0 0.19531,-0.01172 0.28906,-0.03906c1.1875,1.25 2.85938,2.03906 4.71094,2.03906c3.17188,0 5.82031,-2.29687 6.38672,-5.30859c0.03125,0.00781 0.04297,0.00781 0.07422,0.01563c0.38281,0.11328 0.69141,0.23047 0.69141,0.23047c0.51563,0.19141 1.09375,-0.07031 1.28516,-0.58594c0.19141,-0.51953 -0.07031,-1.09766 -0.58984,-1.28906c0,0 -0.35937,-0.13281 -0.8125,-0.26953c-0.1875,-0.05859 -0.39453,-0.11328 -0.60156,-0.16406c-0.08594,-0.64062 -0.26562,-1.25391 -0.52734,-1.82031c0.15625,-0.16016 0.34375,-0.33594 0.51563,-0.48437c0.35547,-0.29687 0.65234,-0.50781 0.65234,-0.50781c0.35547,-0.24219 0.51563,-0.68359 0.39844,-1.09766c-0.11719,-0.41406 -0.48437,-0.70703 -0.91406,-0.72656c-0.03516,0 -0.07031,0 -0.10156,0c-0.19141,0.01172 -0.375,0.07813 -0.53125,0.19141c0,0 -0.36328,0.25391 -0.78516,0.60938c-0.11719,0.09375 -0.24219,0.21484 -0.35937,0.32031c-0.42969,-0.46484 -0.92187,-0.86719 -1.46875,-1.19141c0.46875,-0.77344 0.90234,-1.21875 0.90234,-1.21875c0.29297,-0.29297 0.375,-0.73047 0.21484,-1.10937c-0.16406,-0.37891 -0.54297,-0.61719 -0.95703,-0.60547c-0.26172,0.01172 -0.50781,0.12109 -0.6875,0.30859c0,0 -0.67969,0.72266 -1.33203,1.875c-0.46875,-0.10937 -0.95312,-0.17187 -1.45312,-0.17187c-0.13672,0 -0.27344,0.01563 -0.40625,0.02344c-0.05859,-0.23437 -0.11719,-0.53125 -0.12891,-0.82031c-0.02344,-0.58984 0.03125,-1.09766 0.03125,-1.09766c0.03125,-0.28516 -0.05859,-0.57031 -0.25,-0.78516c-0.19141,-0.21484 -0.46484,-0.33594 -0.75391,-0.33594c-0.51172,0.00781 -0.9375,0.39844 -0.98828,0.91016c0,0 -0.06641,0.63281 -0.03516,1.38672c0.01172,0.375 0.02734,0.78125 0.11328,1.19922c-1.00781,0.40625 -1.89844,1.05469 -2.58594,1.88281c-0.13672,-0.16406 -0.28516,-0.32422 -0.4375,-0.47266c0.18359,-0.70312 0.62109,-1.15625 0.62109,-1.15625c0.30859,-0.27734 0.41406,-0.71094 0.26563,-1.09766c-0.14453,-0.38672 -0.51172,-0.64453 -0.92578,-0.64844c-0.26172,0 -0.51172,0.09766 -0.69922,0.27734c0,0 -0.5625,0.51953 -0.96094,1.40625c-0.77734,-0.38281 -1.64062,-0.60937 -2.55078,-0.65625c-0.08984,-0.49219 -0.16016,-1.12109 0.06641,-1.53125c0.17969,-0.3125 0.17578,-0.69531 -0.00781,-1.00391c-0.17969,-0.30859 -0.51562,-0.49609 -0.87109,-0.49219c-0.36719,0.00391 -0.69922,0.20703 -0.87109,0.52734c-0.54297,0.98438 -0.51562,1.98828 -0.37891,2.73438c-0.60156,0.16797 -1.16797,0.42188 -1.68359,0.75c-0.03125,-0.00391 -0.11719,-0.01953 -0.32812,-0.14844c-0.24609,-0.15234 -0.5625,-0.42187 -0.77734,-1.13672c-0.12109,-0.43359 -0.51953,-0.73047 -0.96484,-0.73047c-0.32031,0.00391 -0.61719,0.15625 -0.80469,0.41406c-0.1875,0.25391 -0.23828,0.58594 -0.14453,0.88672c0.30859,1.02344 0.875,1.69922 1.42578,2.10547c-0.27734,0.34375 -0.52344,0.71484 -0.72656,1.10938c-0.33984,-0.28516 -0.73047,-0.63281 -1.16406,-1.0625c-0.97266,-0.96484 -1.95312,-2.24219 -2.4375,-3.40625c0.06641,-0.05859 0.09766,-0.09766 0.19922,-0.17187c0.39844,-0.30078 1.01953,-0.67187 1.65234,-1.04687c0.63672,-0.375 1.28906,-0.74609 1.82422,-1.125c0.26953,-0.19141 0.50781,-0.37891 0.72656,-0.61719c0.21875,-0.23828 0.51172,-0.57422 0.45313,-1.16406c-0.27734,-2.86328 -0.35547,-5.23437 -0.08984,-6.91406c0.34375,-0.00781 0.58984,-0.03516 1.125,0.02344c0.85938,0.10156 1.87891,0.26953 2.85547,0.44531c0.97656,0.17578 1.91406,0.35156 2.66016,0.46875c0.37109,0.05469 0.69141,0.09766 0.98047,0.11719c0.14063,0.00781 0.27344,0.01172 0.4375,-0.00391c0.16016,-0.01953 0.38281,0.02344 0.74219,-0.33594c0.14844,-0.14844 0.21094,-0.24219 0.34375,-0.41016c0.13281,-0.16406 0.29688,-0.375 0.48828,-0.61719c0.37891,-0.48047 0.86328,-1.08203 1.36719,-1.66406c0.5,-0.58594 1.03125,-1.14844 1.46875,-1.53516c0.32422,-0.28125 0.64063,-0.40625 0.6875,-0.45312c0.0625,0.02344 0.15234,0.07422 0.3125,0.20703c0.26172,0.21094 0.60547,0.58594 0.99219,1.04688c0.76953,0.92969 1.71875,2.21875 2.92578,3.42578c0.31641,0.31641 0.80859,0.38672 1.19922,0.16406c0,0 1.73438,-0.98047 3.56641,-1.82812c0.91406,-0.42578 1.85938,-0.8125 2.56641,-1.02344c0.31641,-0.09375 0.55859,-0.13672 0.72266,-0.15234c0.01953,0.04297 0.00391,0.00391 0.02344,0.06641c0.07031,0.21484 0.14453,0.53125 0.20703,0.89844c0.12891,0.73438 0.22266,1.67969 0.28516,2.60156c0.12891,1.83594 0.13672,3.57031 0.13672,3.57031c0,0.45703 0.3125,0.85547 0.75781,0.96484c0,0 1.71875,0.43359 3.41797,1.01172c0.85156,0.28516 1.69922,0.61719 2.27344,0.91016c0.23438,0.125 0.37891,0.22656 0.48828,0.30859c-0.03516,0.10938 -0.10937,0.48438 -0.33594,1.05469c-0.26953,0.68359 -0.63672,1.50391 -1.00781,2.28906c-0.73828,1.57031 -1.48047,2.99219 -1.48047,2.99219c-0.23437,0.45313 -0.09375,1.00781 0.32422,1.29297c0,0 1.23438,0.83594 2.44531,1.84766c0.60547,0.50781 1.20313,1.05859 1.60547,1.53125c0.29297,0.34375 0.42578,0.66016 0.48047,0.75c-0.05469,0.07813 -0.18359,0.32422 -0.46484,0.58984c-0.39844,0.375 -0.98437,0.80469 -1.57422,1.1875c-1.18359,0.77344 -2.37891,1.37109 -2.37891,1.37109c-0.44531,0.22266 -0.65625,0.74219 -0.5,1.21094c0,0 0.35547,1.05469 0.64844,2.17578c0.14844,0.5625 0.27734,1.14063 0.34375,1.57422c0.01563,0.12891 0.01563,0.19922 0.02344,0.29297c-0.08203,0.02734 -0.13672,0.05078 -0.25,0.07813c-0.42578,0.10547 -1.01953,0.21094 -1.60156,0.29688c-1.16797,0.17188 -2.30469,0.26953 -2.30469,0.26953c-0.42187,0.03906 -0.77734,0.33984 -0.87891,0.75391l-0.70312,2.79297c-0.80469,-0.35156 -1.85547,-0.79297 -2.60937,-1.28125c0.03516,-0.13672 0.07813,-0.32031 0.10547,-0.40625c0.28516,-0.02734 0.34375,0.02344 0.73828,-0.11328c0.85938,-0.30078 1.92578,-1.04687 2.38672,-2.43359c0.42969,-1.28906 0.24219,-2.50391 -0.43359,-3.27344c-0.67578,-0.76953 -1.63281,-1.04297 -2.51562,-1.04297c-1.82812,0 -2.82812,1.4375 -2.82812,1.4375c-0.20703,0.29688 -0.23828,0.68359 -0.08203,1.00781c0.15625,0.32422 0.47656,0.53906 0.83594,0.5625c0.35938,0.02734 0.70313,-0.14453 0.90234,-0.44531c0,0 0.35156,-0.5625 1.17188,-0.5625c0.44141,0 0.83984,0.16016 1.01172,0.35938c0.17188,0.19922 0.32031,0.48438 0.03906,1.32422c-0.25781,0.76953 -0.69141,1.01953 -1.14844,1.17969c-0.46094,0.16016 -0.83594,0.13672 -0.83594,0.13672c-0.46094,-0.03125 -0.88672,0.26172 -1.02344,0.70703c0,0 -1.04297,3.40234 -1.04297,7.29297c-0.00391,0.35938 0.18359,0.69531 0.49609,0.87891c0.3125,0.17969 0.69531,0.17969 1.00781,0c0.3125,-0.18359 0.5,-0.51953 0.49609,-0.87891c0,-1.40234 0.13672,-2.63672 0.29688,-3.66016c1.49219,0.84766 3.32813,1.58594 3.32813,1.58594c0.26563,0.10938 0.57031,0.09766 0.82813,-0.03516c0.25781,-0.12891 0.44531,-0.36719 0.51563,-0.64844l0.83203,-3.33203c0.42188,-0.03906 0.83203,-0.07031 1.70313,-0.19531c0.62109,-0.09375 1.25391,-0.20312 1.79688,-0.33984c0.27344,-0.06641 0.52344,-0.13672 0.76172,-0.23828c0.23828,-0.10156 0.5,-0.16016 0.78125,-0.60156c0.24609,-0.38672 0.23438,-0.66406 0.23828,-0.9375c0.00781,-0.26953 -0.01953,-0.53516 -0.0625,-0.81641c-0.08203,-0.57031 -0.23047,-1.19531 -0.38672,-1.79687c-0.20703,-0.78906 -0.31641,-1.09375 -0.44922,-1.51172c0.44531,-0.23437 0.90625,-0.45312 1.83594,-1.05859c0.65234,-0.42187 1.3125,-0.89844 1.85938,-1.41406c0.54688,-0.51953 1.08203,-1.05078 1.12109,-1.95703c0.03906,-0.94531 -0.46875,-1.52344 -0.99609,-2.13672c-0.52344,-0.61719 -1.18359,-1.21484 -1.83594,-1.76562c-0.95312,-0.79687 -1.46094,-1.12891 -1.90234,-1.4375c0.24609,-0.48047 0.56641,-1.09375 1.14063,-2.30859c0.37891,-0.80859 0.76172,-1.66016 1.05469,-2.41016c0.29297,-0.74609 0.53906,-1.27344 0.53906,-1.98437c0,-0.62109 -0.35156,-0.98437 -0.64062,-1.23828c-0.29297,-0.25781 -0.625,-0.45312 -0.99609,-0.64844c-0.73828,-0.38281 -1.64062,-0.72266 -2.53906,-1.03125c-1.43359,-0.48437 -2.33203,-0.70312 -2.85156,-0.83594c-0.00781,-0.52344 -0.00781,-1.42187 -0.11328,-2.94922c-0.0625,-0.96094 -0.16016,-1.95703 -0.30859,-2.8125c-0.07422,-0.42578 -0.16406,-0.81641 -0.28125,-1.17187c-0.11328,-0.35937 -0.23047,-0.6875 -0.5625,-1.01953c-0.45703,-0.45703 -0.96875,-0.46484 -1.38281,-0.44141c-0.41797,0.02344 -0.82812,0.12109 -1.26562,0.25c-0.88281,0.26172 -1.87891,0.67969 -2.83984,1.125c-1.54297,0.71875 -2.45703,1.23828 -2.97266,1.52344c-0.85156,-0.92578 -1.64453,-1.90625 -2.33984,-2.74219c-0.41406,-0.50391 -0.8125,-0.95312 -1.25391,-1.32031c-0.44531,-0.36328 -0.98047,-0.6875 -1.65234,-0.6875zM30,46c0,-0.55078 -0.44922,-1 -1,-1c-0.55078,0 -1,0.44922 -1,1c0,0.55078 0.44922,1 1,1c0.55078,0 1,-0.44922 1,-1zM14.5,23c1.67969,0 3.12891,0.92188 3.90234,2.27734c-0.25391,0.69531 -0.40234,1.44141 -0.40234,2.22266c0,0.88672 0.17969,1.73047 0.5,2.5h-3c-1.11328,0 -2.05469,0.75 -2.375,1.76563c-1.8125,-0.57812 -3.125,-2.25 -3.125,-4.26562c0,-2.34375 1.77344,-4.23047 4.05469,-4.45312c0.04688,-0.00391 0.08984,-0.00781 0.13281,-0.01562c0.10547,-0.00781 0.20703,-0.03125 0.3125,-0.03125zM24.5,23c2.46484,0 4.44141,1.95703 4.48828,4.41016c-0.00391,0.05859 -0.00391,0.12109 0,0.18359c-0.04687,2.44922 -2.02344,4.40625 -4.48828,4.40625c-2.49609,0 -4.5,-2.00391 -4.5,-4.5c0,-2.49609 2.00391,-4.5 4.5,-4.5zM13,27c-0.55078,0 -1,0.44922 -1,1c0,0.55078 0.44922,1 1,1c0.55078,0 1,-0.44922 1,-1c0,-0.55078 -0.44922,-1 -1,-1zM25,27c-0.55078,0 -1,0.44922 -1,1c0,0.55078 0.44922,1 1,1c0.55078,0 1,-0.44922 1,-1c0,-0.55078 -0.44922,-1 -1,-1zM23,45c-0.55078,0 -1,0.44922 -1,1c0,0.55078 0.44922,1 1,1c0.55078,0 1,-0.44922 1,-1c0,-0.55078 -0.44922,-1 -1,-1zM26,45c-0.55078,0 -1,0.44922 -1,1c0,0.55078 0.44922,1 1,1c0.55078,0 1,-0.44922 1,-1c0,-0.55078 -0.44922,-1 -1,-1z"></path></g></g>
</svg>
								</a>`
						}
					</div>
				</div>
			</nav>
 `
	const inputBusqueda = document.querySelector('#inputBusqueda')
	if (inputBusqueda) {
		inputBusqueda.addEventListener('keyup', (e) => {
			if (e.target.value != '') {
				buscar(e.target.value)
			} else {
				resultadosContenedor.innerHTML = ''
				resultadosContenedor.classList.remove(
					'busqueda-resultados-contenedor--show'
				)
			}
		})
	}

	const btnCerrarSesion = document.querySelector('#btnCerrarSesion')
	if (btnCerrarSesion) {
		btnCerrarSesion.addEventListener('click', () => {
			cerrarSesion()
		})
	}

	const navbarDropdown = document.querySelector(
		'.navbar-principal-boton-hamburguesa'
	)
	navbarDropdown.addEventListener('click', () => {
		inputBusqueda.value = ''
		resultadosContenedor.innerHTML = ''
	})
}

/**
 * Filtra los capitulos la temporada 1 y nombre o numero de episodio de la misma y renderiza los resultados.
 * @param {string} elemento - La palabra a buscar.
 */
function buscar(elemento) {
	const capitulos = getCapitulos()
	const resultado = capitulos.filter(
		(capitulo) =>
			(capitulo.temporada == 1 &&
				capitulo.nombre.toLowerCase().includes(elemento.toLowerCase())) ||
			(capitulo.temporada == 1 && capitulo.capitulo == elemento)
	)

	if (resultado.length < 1) {
		resultadosContenedor.classList.add('busqueda-resultados-contenedor--show')
		resultadosContenedor.innerHTML = `
				<a
				href="#"
				class="list-group-item list-group-item-action"
				aria-current="true">
			No se encontraron resultados
			<img src='/recursos/media/img/homero-error.png' alt='imagen no se encontraron resultados' />
			</a>
		`
	} else {
		renderizarResultadosBusqueda(resultado)
	}
}

function renderizarResultadosBusqueda(listaResultados) {
	resultadosContenedor.classList.add('busqueda-resultados-contenedor--show')
	resultadosContenedor.innerHTML = ''

	listaResultados.forEach((resultado) => {
		resultadosContenedor.innerHTML += `
		<a
				href="/paginas/detalleDeCategoria/detalleDeCategoria.html"
				class="list-group-item list-group-item-action"
				aria-current="true">
				${resultado.nombre}
				<img src='${resultado.imgUrl}' alt='imagen resultado busqueda' />
			</a>
`
	})
}
